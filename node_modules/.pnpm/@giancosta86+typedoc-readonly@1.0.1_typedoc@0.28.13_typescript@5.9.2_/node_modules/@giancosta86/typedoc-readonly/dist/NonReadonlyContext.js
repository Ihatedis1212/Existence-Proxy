import { ReferenceType } from "typedoc";
import { AnalysisContext } from "./AnalysisContext.js";
import { ReadonlyWrapper } from "./ReadonlyWrapper.js";
import { ReadonlyContext } from "./ReadonlyContext.js";
export class NonReadonlyContext extends AnalysisContext {
    constructor(logger) {
        super(logger, "non-readonly");
    }
    simplifyReferenceType(referenceType) {
        const { logger } = this;
        const readonlyWrapper = ReadonlyWrapper.get(this.logger, referenceType);
        if (!readonlyWrapper) {
            return referenceType;
        }
        const readonlyContext = new ReadonlyContext(this.logger);
        const simplifiedSubject = readonlyContext.simplify(readonlyWrapper.subject);
        const shouldKeepReadonlyWrapper = simplifiedSubject instanceof ReferenceType;
        logger.verbose(`ðŸ¤”Should keep Readonly<> wrapper around ${simplifiedSubject}? ${shouldKeepReadonlyWrapper}`);
        return shouldKeepReadonlyWrapper ? referenceType : simplifiedSubject;
    }
    simplifyReflectionType(reflectionType) {
        return reflectionType;
    }
}
